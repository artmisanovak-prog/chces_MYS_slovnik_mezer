<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêà‚Äç‚¨õ Kocour ‚Äì diagnostick√Ω m√≥d</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: Georgia, serif;
    background: #fff;
    color: #111;
    max-width: 700px;
    margin: 0 auto;
    padding: 1.5rem 1rem;
    line-height: 1.6;
  }
  h1 { font-size: 1.4rem; margin-bottom: 0.3rem; }
  h2 { font-size: 1.1rem; margin: 1.5rem 0 0.5rem; border-bottom: 1px solid #111; padding-bottom: 0.3rem; }
  .nav { font-size: 0.85rem; margin-bottom: 1.5rem; }
  .nav a { color: #111; }
  details { border: 1px solid #111; margin-bottom: 1.2rem; }
  details summary {
    cursor: pointer;
    padding: 0.7rem 1rem;
    font-weight: bold;
    list-style: none;
  }
  details summary::before { content: "‚ñ∂ "; }
  details[open] summary::before { content: "‚ñº "; }
  .navod summary { }
  .pohadka-summary {
    background: #111;
    color: #fff;
  }
  .pohadka-obsah {
    padding: 1rem;
    max-height: 300px;
    overflow-y: auto;
    font-size: 0.9rem;
    white-space: pre-line;
    border-top: 1px solid #111;
  }
  .pohadka-img {
    width: 100%;
    max-height: 180px;
    object-fit: contain;
    display: block;
    filter: grayscale(100%);
    padding: 0.5rem;
  }
  .navod-obsah, .klic-obsah {
    padding: 0.7rem 1rem 1rem;
    font-size: 0.88rem;
  }
  .navod-obsah p, .klic-obsah p { margin-bottom: 0.5rem; }
  .navod-obsah ul { margin-left: 1.2rem; }
  .navod-obsah li { margin-bottom: 0.3rem; }
  .klic-uhel { border-bottom: 1px solid #eee; padding: 0.5rem 0; }
  .klic-uhel:last-child { border-bottom: none; }
  .klic-uhel strong { display: block; }
  .klic-uhel em { color: #555; font-size: 0.82rem; }
  .klic-obsah { max-height: 350px; overflow-y: auto; }
  .otazky {
    background: #f5f5f5;
    border-left: 3px solid #111;
    padding: 0.8rem 1rem;
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
  }
  .otazky p { margin-bottom: 0.4rem; }
  .setup {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
  }
  .setup label { font-size: 0.9rem; }
  .setup input[type=number] {
    width: 60px;
    padding: 0.4rem;
    border: 1px solid #111;
    font-size: 1rem;
    text-align: center;
  }
  .btn {
    padding: 0.5rem 1.2rem;
    background: #111;
    color: #fff;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    font-family: Georgia, serif;
  }
  .btn:hover { background: #333; }
  .btn-outline {
    background: #fff;
    color: #111;
    border: 1px solid #111;
  }
  .clen-karta {
    border: 1px solid #111;
    margin-bottom: 1.2rem;
    padding: 1rem;
  }
  .clen-hlavicka {
    display: flex;
    align-items: center;
    gap: 0.7rem;
    margin-bottom: 0.8rem;
  }
  .clen-cislo { font-weight: bold; font-size: 0.9rem; min-width: 60px; }
  .clen-jmeno {
    flex: 1;
    padding: 0.3rem 0.5rem;
    border: 1px solid #aaa;
    font-family: Georgia, serif;
    font-size: 0.9rem;
  }
  .otazka-radek { margin-bottom: 0.8rem; }
  .otazka-radek label {
    display: block;
    font-size: 0.8rem;
    font-weight: bold;
    margin-bottom: 0.3rem;
    color: #444;
  }
  .otazka-radek textarea {
    width: 100%;
    padding: 0.4rem 0.5rem;
    border: 1px solid #ccc;
    font-family: Georgia, serif;
    font-size: 0.85rem;
    resize: vertical;
    min-height: 50px;
  }
  .otazka-radek select {
    width: 100%;
    padding: 0.4rem 0.5rem;
    border: 1px solid #111;
    font-family: Georgia, serif;
    font-size: 0.85rem;
    background: #fff;
    margin-top: 0.2rem;
  }
  .vysledky { margin-top: 2rem; border-top: 2px solid #111; padding-top: 1rem; }
  .mapa-tabulka { width: 100%; border-collapse: collapse; font-size: 0.85rem; margin-bottom: 1.2rem; }
  .mapa-tabulka th, .mapa-tabulka td { border: 1px solid #ccc; padding: 0.4rem 0.6rem; text-align: left; }
  .mapa-tabulka th { background: #111; color: #fff; }
  .pretizeny { background: #f0f0f0; font-weight: bold; }
  .deficitni { color: #777; }
  .sekce-vysledku { margin-bottom: 1.5rem; }
  .sekce-vysledku h3 { font-size: 0.95rem; border-bottom: 1px solid #ccc; padding-bottom: 0.3rem; margin-bottom: 0.7rem; }
  .uhel-vysledek { margin-bottom: 0.8rem; font-size: 0.88rem; }
  .uhel-vysledek strong { display: block; }
  .uhel-doporuceni {
    border-left: 2px solid #111;
    padding-left: 0.7rem;
    margin-top: 0.3rem;
    color: #333;
    font-style: italic;
  }
  .generativni-odkaz {
    margin-top: 1.5rem;
    font-size: 0.85rem;
    border-top: 1px solid #ccc;
    padding-top: 1rem;
  }
  .generativni-odkaz a { color: #111; }
  @media print {
    .btn, .setup, details summary { display: none; }
    .pohadka-obsah, .klic-obsah { max-height: none; }
  }
</style>
</head>
<body>

<div class="nav">
  <a href="../">‚Üê Kocour</a> &nbsp;|&nbsp;
  <a href="../../">Chce≈° my≈°?</a>
</div>

<h1>üê± Kocour ‚Äì diagnostick√Ω m√≥d</h1>
<p style="font-size:0.85rem; color:#555; margin-bottom:1rem;">Tyranie p≈ôedƒçasn√©ho uzav√≠r√°n√≠ v komunikaci</p>

<details class="navod">
  <summary>üê≠ N√°vod pro facilit√°tora (my≈°)</summary>
  <div class="navod-obsah">
    <p><strong>Ty jsi my≈°.</strong> Sed√≠≈°, poslouch√°≈°, zapisuje≈°. Nehodnot√≠≈°, kdo m√° pravdu ‚Äî mapuje≈°, jak t√Ωm mysl√≠.</p>
    <p><strong>D≈Øle≈æit√© p≈ôed zaƒç√°tkem:</strong></p>
    <ul>
      <li>Kocour nen√≠ ƒçlovƒõk. Je to porucha ‚Äî zp≈Øsob, jak√Ωm se t√Ωm chov√° v urƒçit√©m momentu.</li>
      <li>Zv√≠≈ô√°tka jsou poruchy. D√≠vka na kartƒõ je ≈ôeƒç. Zv√≠≈ôe je porucha. Text mezi nimi je mezera pro interpretaci.</li>
      <li>√öhly nejsou osobnostn√≠ typy. Stejn√Ω ƒçlovƒõk se v jin√Ω den d√≠v√° jin√Ωm √∫hlem. Nejde o ≈°katulkov√°n√≠ lid√≠.</li>
      <li>Neexistuje spr√°vn√Ω nebo ≈°patn√Ω √∫hel. Jde o to m√≠t jich co nejv√≠c ‚Äî roz≈°i≈ôovat pohled.</li>
      <li>P≈ôi≈ôazuje≈° ty ‚Äî podle toho, co sly≈°√≠≈°. √öhel vyb√≠r√°≈° intuitivnƒõ, podle j√°dra odpovƒõdi.</li>
      <li>M≈Ø≈æe≈° p≈ôi≈ôazovat hned v pr≈Øbƒõhu nebo a≈æ na konci. Textov√© ok√©nko je pro tv≈Øj z√°znam.</li>
    </ul>
    <p>Kl√≠ƒç k √∫hl≈Øm m√°≈° v≈ædy k dispozici ‚Äî rozbal ho n√≠≈æe kdykoli pot≈ôebuje≈°.</p>
  </div>
</details>

<details>
  <summary class="pohadka-summary">üìñ Poh√°dka o kocourovi</summary>
  <img src="kocour.jpg" alt="Kocour" class="pohadka-img" onerror="this.style.display='none'">
  <div class="pohadka-obsah" id="pohadka-text">Naƒç√≠t√°m poh√°dku‚Ä¶</div>
</details>

<details>
  <summary>üîë Kl√≠ƒç k √∫hl≈Øm (pro p≈ôi≈ôazov√°n√≠)</summary>
  <div class="klic-obsah" id="klic-uhlu">Naƒç√≠t√°m‚Ä¶</div>
</details>

<div class="otazky">
  <strong>T≈ôi ot√°zky pro t√Ωm (Kocour):</strong>
  <p><strong>Q1 ‚Äì Smysl:</strong> Co je podle v√°s hlavn√≠ pointa nebo sdƒõlen√≠ tohoto p≈ô√≠bƒõhu?</p>
  <p><strong>Q2 ‚Äì Zaujet√≠:</strong> Kter√° konkr√©tn√≠ vƒõta, obraz nebo moment v√°s nejv√≠c zaujal/a a proƒç?</p>
  <p><strong>Q3 ‚Äì Aplikace:</strong> Kdyby tento p≈ô√≠bƒõh byl n√°vodem nebo radou, co by v√°m radil dƒõlat (nebo nedƒõlat) ve va≈°em pracovn√≠m ≈æivotƒõ?</p>
</div>

<div class="setup">
  <label>Poƒçet ƒçlen≈Ø t√Ωmu:</label>
  <input type="number" id="pocet-clenu" min="1" max="30" value="4">
  <button class="btn" onclick="vytvorKarty()">Vytvo≈ôit z√°pisn√≠k</button>
</div>

<div id="karty-clenu"></div>

<div id="tlacitko-vyhodnotit" style="display:none; margin-top:1rem;">
  <button class="btn" onclick="vyhodnotit()">üê≠ Vyhodnotit ‚Äì uk√°zat kognitivn√≠ mapu t√Ωmu</button>
</div>

<div id="vysledky" class="vysledky" style="display:none;"></div>

<p class="generativni-odkaz">üîÆ Chce≈° na z√°kladƒõ kognitivn√≠ mapy vygenerovat nov√Ω workshop? Zkus <a href="generativni.html">generativn√≠ m√≥d</a>.</p>

<script>
let uhly = [];

fetch('uhly12.json')
  .then(r => r.json())
  .then(data => {
    uhly = data;
    renderKlic();
  });

fetch('pohadka.md')
  .then(r => r.text())
  .then(text => {
    document.getElementById('pohadka-text').textContent = text;
  })
  .catch(() => {
    document.getElementById('pohadka-text').textContent = 'Poh√°dku najde≈° v souboru pohadka.md';
  });

function renderKlic() {
  const el = document.getElementById('klic-uhlu');
  el.innerHTML = uhly.map(u => `
    <div class="klic-uhel">
      <strong>${u.id}. ${u.emoji} ${u.nazev}</strong>
      <em>${u.metafora}</em>
    </div>
  `).join('');
}

function vytvorKarty() {
  const pocet = parseInt(document.getElementById('pocet-clenu').value);
  if (!pocet || pocet < 1) return;
  const options = uhly.map(u => `<option value="${u.id}">${u.id}. ${u.emoji} ${u.nazev}</option>`).join('');
  const selectHtml = `<option value="">‚Äî nevybr√°no ‚Äî</option>${options}`;
  let html = '';
  for (let i = 1; i <= pocet; i++) {
    html += `
      <div class="clen-karta" id="clen-${i}">
        <div class="clen-hlavicka">
          <span class="clen-cislo">ƒålen ${i}</span>
          <input class="clen-jmeno" type="text" placeholder="jm√©no / ƒç√≠slo (voliteln√©)" id="jmeno-${i}">
        </div>
        <div class="otazka-radek">
          <label>Q1 ‚Äì Smysl (co ≈ôekl/a):</label>
          <textarea id="odpoved-${i}-1" placeholder="Zapi≈° odpovƒõƒè‚Ä¶"></textarea>
          <select id="uhel-${i}-1">${selectHtml}</select>
        </div>
        <div class="otazka-radek">
          <label>Q2 ‚Äì Zaujet√≠ (co ≈ôekl/a):</label>
          <textarea id="odpoved-${i}-2" placeholder="Zapi≈° odpovƒõƒè‚Ä¶"></textarea>
          <select id="uhel-${i}-2">${selectHtml}</select>
        </div>
        <div class="otazka-radek">
          <label>Q3 ‚Äì Aplikace (co ≈ôekl/a):</label>
          <textarea id="odpoved-${i}-3" placeholder="Zapi≈° odpovƒõƒè‚Ä¶"></textarea>
          <select id="uhel-${i}-3">${selectHtml}</select>
        </div>
      </div>
    `;
  }
  document.getElementById('karty-clenu').innerHTML = html;
  document.getElementById('tlacitko-vyhodnotit').style.display = 'block';
  document.getElementById('vysledky').style.display = 'none';
}

function vyhodnotit() {
  const pocet = parseInt(document.getElementById('pocet-clenu').value);
  const pocty = {};
  uhly.forEach(u => pocty[u.id] = { count: 0, nazev: u.nazev, emoji: u.emoji, q3: u.q3 });
  let celkem = 0;
  const detailClenu = [];
  for (let i = 1; i <= pocet; i++) {
    const jmeno = document.getElementById(`jmeno-${i}`).value || `ƒålen ${i}`;
    const uhlyClena = [];
    for (let q = 1; q <= 3; q++) {
      const val = document.getElementById(`uhel-${i}-${q}`).value;
      if (val) { pocty[val].count++; celkem++; uhlyClena.push(parseInt(val)); }
    }
    detailClenu.push({ jmeno, uhly: uhlyClena });
  }
  if (celkem === 0) { alert('P≈ôi≈ôaƒè aspo≈à jeden √∫hel p≈ôed vyhodnocen√≠m.'); return; }

  const pretizene = [], deficitni = [], vyvazene = [], nepouzite = [];
  uhly.forEach(u => {
    const p = pocty[u.id];
    p.procento = celkem > 0 ? p.count / celkem : 0;
    if (p.count === 0) nepouzite.push(p);
    else if (p.procento >= 0.30) pretizene.push(p);
    else if (p.procento <= 0.10) deficitni.push(p);
    else vyvazene.push(p);
  });

  let html = `<h2>üß† Kognitivn√≠ mapa t√Ωmu</h2>`;
  html += `<p style="font-size:0.85rem;color:#555;margin-bottom:1rem;">Celkem p≈ôi≈ôazeno: <strong>${celkem}</strong> √∫hl≈Ø od <strong>${pocet}</strong> ƒçlen≈Ø</p>`;

  html += `<table class="mapa-tabulka"><tr><th>√öhel</th><th>Poƒçet</th><th>%</th><th>Typ</th></tr>`;
  uhly.map(u => pocty[u.id]).sort((a,b) => b.count - a.count).forEach(p => {
    const proc = Math.round(p.procento * 100);
    let typ = '‚óá vyv√°≈æen√Ω', trida = '';
    if (p.count === 0) { typ = '‚Äî'; trida = 'deficitni'; }
    else if (p.procento >= 0.30) { typ = '‚ñ≤ p≈ôet√≠≈æen√Ω'; trida = 'pretizeny'; }
    else if (p.procento <= 0.10) { typ = '‚ñΩ deficitn√≠'; trida = 'deficitni'; }
    html += `<tr class="${trida}"><td>${p.emoji} ${p.nazev}</td><td>${p.count}√ó</td><td>${proc}%</td><td>${typ}</td></tr>`;
  });
  html += `</table>`;

  if (pretizene.length > 0) {
    html += `<div class="sekce-vysledku"><h3>‚ñ≤ P≈ôet√≠≈æen√© √∫hly (nad 30 %)</h3>`;
    html += `<p style="font-size:0.85rem;margin-bottom:0.7rem;">T√Ωm se d√≠v√° po≈ô√°d stejnƒõ. Co vid√≠, vid√≠ dob≈ôe. Co nevid√≠, neexistuje.</p>`;
    pretizene.forEach(p => {
      const protivahy = deficitni.concat(nepouzite).slice(0, 2);
      html += `<div class="uhel-vysledek"><strong>${p.emoji} ${p.nazev} ‚Äì ${p.count}√ó (${Math.round(p.procento*100)}%)</strong>`;
      if (protivahy.length > 0) {
        html += `<div class="uhel-doporuceni">Tr√©nink deficitu ‚Äî √∫kol pro lidi s t√≠mto √∫hlem:<br>`;
        protivahy.forEach(def => { html += `‚Üí <strong>${def.emoji} ${def.nazev}:</strong> ${def.q3}<br>`; });
        html += `</div>`;
      }
      html += `</div>`;
    });
    html += `</div>`;
  }

  const vsechnyDeficitni = deficitni.concat(nepouzite);
  if (vsechnyDeficitni.length > 0) {
    html += `<div class="sekce-vysledku"><h3>‚ñΩ Deficitn√≠ √∫hly (pod 10 % nebo v≈Øbec)</h3>`;
    html += `<p style="font-size:0.85rem;margin-bottom:0.7rem;">Slep√° m√≠sta. Perspektivy, kter√© t√Ωm nepou≈æ√≠v√°, i kdy≈æ by je pot≈ôeboval.</p>`;
    vsechnyDeficitni.forEach(p => {
      html += `<div class="uhel-vysledek"><strong>${p.emoji} ${p.nazev} ‚Äì ${p.count}√ó</strong>`;
      html += `<div class="uhel-doporuceni">N√°vrh √∫kolu: ${p.q3}</div></div>`;
    });
    html += `</div>`;
  }

  if (vyvazene.length > 0) {
    html += `<div class="sekce-vysledku"><h3>‚óá Vyv√°≈æen√© √∫hly ‚Äì mosty</h3>`;
    html += `<p style="font-size:0.85rem;margin-bottom:0.5rem;">Tito lid√© mohou b√Ωt tlumoƒçn√≠ky mezi perspektivami.</p>`;
    const idVyvazene = vyvazene.map(v => uhly.find(u => u.nazev === v.nazev)?.id);
    detailClenu.forEach(clen => {
      if (clen.uhly.some(uid => idVyvazene.includes(uid))) {
        html += `<span style="font-size:0.85rem;">‚Üí ${clen.jmeno} &nbsp;</span>`;
      }
    });
    html += `</div>`;
  }

  html += `<button class="btn btn-outline" style="margin-top:1rem;" onclick="window.print()">üñ® Vytisknout v√Ωsledky</button>`;

  const el = document.getElementById('vysledky');
  el.innerHTML = html;
  el.style.display = 'block';
  el.scrollIntoView({ behavior: 'smooth' });
}
</script>

</body>
</html>
